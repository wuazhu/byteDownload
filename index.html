<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <link rel="shortcut icon"
    href="https://static-index-4gtuqm3bfa95c963-1304825656.tcloudbaseapp.com/official-website/favicon.svg"
    mce_href="https://static-index-4gtuqm3bfa95c963-1304825656.tcloudbaseapp.com/official-website/favicon.svg"
    type="image/x-icon" />
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />
  <title>Tiktok/抖音视频下载</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Droid Sans", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Droid Sans Fallback", "Microsoft YaHei", sans-serif;
    }
    
    @media screen and (min-width:1200px) {
      body .container {
        margin-bottom: 272px;
      }
    }

    @media screen and (max-width:1919px) {
      body .container {
        margin-bottom: 128px;
      }
    }

    .logoWrap {
      /* width: 500px; */
      padding: 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    #app {
      min-height: 100vh;
      padding-bottom: 100px;
      padding-top: 102px;
    }
    .text-bg-primary {
      color: #fff!important;
      background-color: RGBA(13,110,253,var(--bs-bg-opacity,1))!important;
    }
    .dflex {
      display: flex;
      align-items: center;
    }
    .avatar {
      height: 40px;width: 40px;
    }
    .bg-gray-50 {
      background: rgba(0,0,0,.4);
    }
    .vdoItem {
      break-inside: avoid;
      box-sizing: border-box;
      padding: 10px;
      width: 300px;
    }
    .rowWrap {
      -moz-column-count:3; /* Firefox */
      -webkit-column-count:3; 
      column-count: 3;
      column-gap: 3;
    }
    .cardlist {
      -moz-column-count:2; /* Firefox */
      -webkit-column-count:2; 
      column-count: 2;
      column-gap: 2;
      margin-top: 20px;
    }
    .cardlist .card {
      break-inside: avoid;
      box-sizing: border-box;
      padding: 10px;
      /* width: 50%; */
    }
    .container {
      margin-bottom: 0!important;
    }
    .card-text {
      /* font-size: 15px; */
    }
    @media (max-width: 768px) {
      .row {
        flex-direction: column;
      }
      .col-md-4 {
        flex: 0 0 auto;
        width: 100%;
        height: 100px;
      }
      .col-md-8 .card-text {
        font-size: 12px;
      }
      .avatar {
        width: 25px;height: 25px;border-radius: 50%!important;
        margin-right: 6px;
      }
      .card-title {
        display: flex; align-items: center;
      }
    }
  </style>
</head>

<body>
  <div id="app" class="text-white">
    <div class="bg-dark position-fixed top-0 start-0 end-0 z-index-master" style="z-index: 20000;">
      <div class="logoWrap container">
        <img src="/log.svg" class="logo-icon mx-2" alt="" srcset="">
        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTEiIGhlaWdodD0iMzQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgY2xpcC1wYXRoPSJ1cmwoI2EpIj48ZyBjbGlwLXBhdGg9InVybCgjYikiPjxwYXRoIGQ9Ik0xMS42NCAxMy40MzN2LTEuMzFjLS40NTYtLjA1NS0uOTExLS4wOTEtMS4zODUtLjA5MS01LjY0NyAwLTEwLjI1NiA0LjU4Ny0xMC4yNTYgMTAuMjUgMCAzLjQ1OSAxLjczIDYuNTM2IDQuMzcyIDguMzkzYTEwLjE3NyAxMC4xNzcgMCAwIDEtMi43NS02Ljk3M2MuMDE4LTUuNTkgNC40OC0xMC4xNDEgMTAuMDE4LTEwLjI2OVoiIGZpbGw9IiMwMEZBRjAiLz48cGF0aCBkPSJNMTEuODc3IDI4LjM0NWE0LjY3NSA0LjY3NSAwIDAgMCA0LjY2My00LjQ5N1YxLjU0NWg0LjA4YTcuMjI2IDcuMjI2IDAgMCAxLS4xMjctMS40MmgtNS41NzR2MjIuMzAzYTQuNjc1IDQuNjc1IDAgMCAxLTQuNjY0IDQuNDk3Yy0uNzgzIDAtMS41My0uMi0yLjE2Ny0uNTQ3YTQuNjQzIDQuNjQzIDAgMCAwIDMuNzg5IDEuOTY3Wk0yOC4yNTEgOS4xMTlWNy44OGE3LjY4MyA3LjY4MyAwIDAgMS00LjIyNi0xLjI1NiA3LjkxNiA3LjkxNiAwIDAgMCA0LjIyNiAyLjQ5NFoiIGZpbGw9IiMwMEZBRjAiLz48cGF0aCBkPSJNMjQuMDQ1IDYuNjI2YTcuNzIxIDcuNzIxIDAgMCAxLTEuOTEzLTUuMDhoLTEuNDk0YTcuODM2IDcuODM2IDAgMCAwIDMuNDA3IDUuMDhaTTEwLjI1NSAxNy41ODVhNC42NzkgNC42NzkgMCAwIDAtNC42ODIgNC42NzljMCAxLjgwMiAxLjAyIDMuMzUgMi41MTQgNC4xMzNhNC43MDcgNC43MDcgMCAwIDEtLjg5Mi0yLjczMSA0LjY3OSA0LjY3OSAwIDAgMSA0LjY4MS00LjY4Yy40NzQgMCAuOTQ4LjA3MyAxLjM4NS4yMTl2LTUuNjhjLS40NTYtLjA1NS0uOTExLS4wOTEtMS4zODUtLjA5MWgtLjIzNnY0LjM3YTQuMzI2IDQuMzI2IDAgMCAwLTEuMzg1LS4yMloiIGZpbGw9IiNGRTJDNTUiLz48cGF0aCBkPSJNMjguMjUyIDkuMTE5djQuMzMzYy0yLjg5NiAwLTUuNTU2LS45MjktNy43NDItMi40OTR2MTEuMzA2YzAgNS42NDQtNC41OSAxMC4yNS0xMC4yNTUgMTAuMjUtMi4xODYgMC00LjIwOC0uNjkyLTUuODY2LTEuODU3IDEuODc2IDIuMDAzIDQuNTM2IDMuMjc3IDcuNTA1IDMuMjc3IDUuNjQ3IDAgMTAuMjU2LTQuNTg4IDEwLjI1Ni0xMC4yNVYxMi4zNzhhMTMuMjY4IDEzLjI2OCAwIDAgMCA3Ljc0MiAyLjQ5NFY5LjMwMWE5LjYxNiA5LjYxNiAwIDAgMS0xLjY0LS4xODJaIiBmaWxsPSIjRkUyQzU1Ii8+PHBhdGggZD0iTTIwLjUxIDIyLjI2NFYxMC45NThhMTMuMjY4IDEzLjI2OCAwIDAgMCA3Ljc0MSAyLjQ5NFY5LjEyYTcuODUgNy44NSAwIDAgMS00LjIyNi0yLjQ5NCA3LjY2IDcuNjYgMCAwIDEtMy4zODgtNS4wOGgtNC4wOHYyMi4zMDNhNC42NzUgNC42NzUgMCAwIDEtNC42NjQgNC40OTcgNC42MjUgNC42MjUgMCAwIDEtMy43ODktMS45NDggNC42NzggNC42NzggMCAwIDEtMi41MTQtNC4xMzMgNC42NzkgNC42NzkgMCAwIDEgNC42ODItNC42NzljLjQ3MyAwIC45NDcuMDczIDEuMzg0LjIxOHYtNC4zNjljLTUuNTM4LjEyNy0xMCA0LjY3OS0xMCAxMC4yMzIgMCAyLjY5NCAxLjAzOCA1LjE1MiAyLjc1IDYuOTczYTEwLjIxIDEwLjIxIDAgMCAwIDUuODY2IDEuODU3YzUuNjI5LjAxOCAxMC4yMzctNC41ODggMTAuMjM3LTEwLjIzMlpNNDEuOTQ3IDYuMTAzSDM5LjN2My44ODloLTMuMDc2djIuNjQ3aDMuMDc2djUuMzk2bC0zLjA3Ni40NDh2Mi43ODlsMy4wNzYtLjQ0OHY0LjYyMmEuNjc4LjY3OCAwIDAgMS0uNjcyLjY3MmgtMi4yMnYyLjY0N2gzLjMyYzEuMjIyIDAgMi4yMi0uOTk4IDIuMjItMi4yMnYtNi4xMDhsMi42OS0uNDA3di0yLjc5bC0yLjY5LjQwOHYtNC45ODloMi42OXYtMi42NDdoLTIuNjlWNi4xMDNaTTU2Ljk0NSA2LjEwM2gtMi42Mjh2MTMuODI1bC04LjcyLjc1M3YyLjc5bDguNzItLjczM3Y2LjIxaDIuNjI4di02LjQ1NWwyLjY5LS4yNDR2LTIuNzlsLTIuNjkuMjQ1VjYuMTAzWiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im01Mi45NTEgOS4xNzgtNi4yNTQtMS4xMnYyLjgxbDYuMjU0IDEuMXYtMi43OVpNNTIuOTUxIDE0Ljk4bC02LjI1NC0xLjEydjIuODFsNi4yNTQgMS4xMnYtMi44MVpNODEuMTI0IDEzLjgybC40MDctMi4xNThoLTIuNzlsLS40MjggMi4xNThoLTcuMjk0bC0uMzI2LTIuMTU4aC0yLjgxMWwuMzQ2IDIuMTU4aC01LjI5NnYyLjU4NmgyMy4zNjZWMTMuODJoLTUuMTc0Wk04NS41NjUgNy45MzVoLTguODYybC0uNDQ4LTEuODMyaC0zLjQ0M2wuNDQ4IDEuODMyaC05LjU5NXYyLjU2NmgyMS45VjcuOTM1Wk04MS45NiAxOC4zSDY3LjI3Yy0xLjIyMiAwLTIuMjIuOTk4LTIuMjIgMi4yMnY2LjA0N2MwIDEuMjIyLjk5OCAyLjIyIDIuMjIgMi4yMmgxNC42ODhjMS4yMjIgMCAyLjIyLS45OTggMi4yMi0yLjIyVjIwLjUyYzAtMS4yMjItLjk3Ny0yLjIyLTIuMjItMi4yMlptLTEzLjc1MiAyLjQwM2gxMi44MzVjLjM2NiAwIC42NzIuMzA2LjY3Mi42NzJ2MS4wOEg2Ny41NTZ2LTEuMDhhLjYzNi42MzYgMCAwIDEgLjY1Mi0uNjcyWm0xMi44MzUgNS43MDFINjguMjA4YS42NzguNjc4IDAgMCAxLS42NzItLjY3MnYtMS4xaDE0LjE1OHYxLjFhLjY2LjY2IDAgMCAxLS42NTEuNjcyWiIgZmlsbD0iI2ZmZiIvPjwvZz48L2c+PGRlZnM+PGNsaXBQYXRoIGlkPSJhIj48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCAwaDkwLjY2N3YzNEgweiIvPjwvY2xpcFBhdGg+PGNsaXBQYXRoIGlkPSJiIj48cGF0aCBmaWxsPSIjZmZmIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC4xMjUpIiBkPSJNMCAwaDkwLjY2N3YzMy44NzVIMHoiLz48L2NsaXBQYXRoPjwvZGVmcz48L3N2Zz4=" alt="" class="logo2">
        <span class="px-2 fs-4">去水印</span>
      </div>
    </div>
    <div class="container  mt-2">
      <ul class="nav nav-pills">
        <li
          v-for="item in tabs"
          class="nav-item"
          v-for="item in tabs" :key="item.id"
          @click="changeTab(item)">
          <a :class="item.active ? 'nav-link active': 'nav-link'" aria-current="page" href="#">
            {{item.name}}
          </a>
        </li>
      </ul>
      <div class="mb-3">
        <div class="alert muted alert-warning mt-3" role="alert" v-if="tabSelected == 1" style="word-break: break-all;">
          请输入单个视频链接 比如:  <br/>网页版:<a href="#" class="alert-link">https://www.douyin.com/video/7153585499477757192</a> <br/>手机版:<a href="#" class="alert-link">https://v.douyin.com/MkmSwy7/</a><br/>分享口令:<a href="#" class="alert-link">8.71 LwF:/ 复制打开抖音，看看【張亦無邪_的图文作品】在海边晃着晃着 又碰到了陈小春张智霖他们。也太巧了... https://v.douyin.com/h9PmxXy/</a>
        </div>
        <div class="alert muted alert-warning mt-3" role="alert" v-if="tabSelected == 2" style="word-break: break-all;">
          请输入用户主页链接 比如:  <br/>网页版:<a href="#" class="alert-link">https://www.douyin.com/user/MS4wLjABAAAA-Hu1YKTuhE3QkCHD5yU26k--RUZiaoMRtpfmeid-Z_o</a> <br/>手机版:<a href="#" class="alert-link">https://v.douyin.com/MN6Gqpj/</a><br/>分享口令:<a href="#" class="alert-link">9- 长按复制此条消息，打开抖音搜索，查看TA的更多作品。 https://v.douyin.com/hmyfn2y/</a>
        </div>
        <div class="alert muted alert-warning mt-3" role="alert" v-if="tabSelected == 3" style="word-break: break-all;">
          请输入用户主页最新视频链接 比如:  <br/>网页版:<a href="#" class="alert-link">https://www.douyin.com/video/7153585499477757192</a>
        </div>
        <textarea class="form-control" v-model="links" id="exampleFormControlTextarea1" placeholder="请输入单个视频链接" rows="3"></textarea>
      </div>
      <div class="py3 d-grid gap-2 d-md-flex justify-content-md-end">
        <button v-if="tabSelected == 1" type="button" class="btn btn-primary" :disabled="!links">
          <a :href="`http://127.0.0.1:9010/download?url=${encodeURIComponent(links)}`" target="_blank" class="text-white">下载视频</a> 
        </button>
        <button v-if="tabSelected == 2" type="button" class="btn btn-primary" :disabled="!links" @click="searchProfile">搜索抖音主页</button>
        <button v-if="tabSelected == 3" type="button" class="btn btn-primary" :disabled="!links" @click="searchTkProfile">搜索TK主页</button>
      </div>
    </div>
    <!-- 提示 -->
    <div :class="['toast align-items-center fade bg-danger border-0 position-fixed top-0 start-50 translate-middle-x mt-4', showError ? 'show': 'hide']" role="alert" aria-live="assertive" aria-atomic="true" style="z-index: 22222;">
      <div class="d-flex">
        <div class="toast-body">
          {{errorMsg}}
        </div>
        <button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close">
        </button>
      </div>
    </div>
    
    <div class="cardlist container">
      <div class="card mb-3 text-dark" v-for="item in list">
        <div class="row g-0">
          <div class="col-md-4 col-xs-4" :style="`background:url(${item.video.origin_cover.url_list[item.video.origin_cover.url_list.length-1]}) no-repeat center; background-size:cover;`">
            <!-- <img :src="item.video.origin_cover.url_list[item.video.origin_cover.url_list.length-1]" class="img-fluid rounded-start" alt="..."> -->
          </div>
          <div class="col-md-8 col-xs-8">
            <div class="card-body">
              <h5 class="card-title"><img :src="item.author.avatar_thumb.url_list[0]" class="avatar rounded mr-2" alt="" srcset=""> <strong class="ml-4">{{item.author.nickname}}</strong></h5>
              <p class="card-text">{{item.desc}}</p>
              <a v-if="tabSelected == 2" :href="`http://127.0.0.1:9010/video/${item.aweme_id}`" download="ship" class="btn btn-primary">下载视频</a>
              <a v-if="tabSelected == 3" :href="`http://127.0.0.1:9010/@${item.author.unique_id}/video/${item.aweme_id}`" download="ship" class="btn btn-primary">下载视频</a>
              
            </div>
          </div>
        </div>
      </div>
    </div>
    <div v-if="loading" class="text-center position-fixed top-0 bottom-0 start-0 end-0 bg-gray-50">
      <div class="spinner-border position-absolute top-50" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>
  </div>
</body>
<script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
<script src="https://mat1.gtimg.com/www/asset/lib/jquery/jquery/jquery-1.11.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

<script>
  new Vue({
    el: '#app',
    data: {
      // links: '8.71 LwF:/ 复制打开抖音，看看【張亦無邪_的图文作品】在海边晃着晃着 又碰到了陈小春张智霖他们。也太巧了... https://v.douyin.com/h9PmxXy/',
      // links: 'https://v.douyin.com/hmyfn2y/',
      // links: 'https://www.tiktok.com/@rosalie_business/video/7177324336951479557',
      links: 'https://www.tiktok.com/@paulcooks/video/7177022823188237574',
      


      // 主页视频 // 9- 长按复制此条消息，打开抖音搜索，查看TA的更多作品。 https://v.douyin.com/hmyfn2y/
      showError: false,
      list: {},
      errorMsg: '',
      tabs: [
        {name: '单视频下载', active: false, id: 1,},
        {name: 'DY主页视频下载', active: false, id: 2,},
        {name: 'TK主页视频下载', active: true, id: 3,},
      ],
      loading: false
    },
    computed: {
      tabSelected() {
        return this.tabs.find(item => item.active).id
      }
    },
    methods: {
      searchTkProfile() {
        const _this = this
        _this.loading = true
        $.ajax(`http://127.0.0.1:80/api/tiktok_profile/?url=${this.links}`, {
          method: "get",
        }).done(function (res) {
          console.log('请求来的数据', res);
          _this.loading = false
          if (res.status == 'success') {
            _this.list = res.aweme_list
          } else {
            _this.list = []
            _this.errorMsg = res.message
            _this.showError = true
          }
        })
      },
      searchProfile() {
        const _this = this
        _this.loading = true
        $.ajax(`http://127.0.0.1:80/api/douyin_profile/?url=${this.links}`, {
          method: "get",
        }).done(function (res) {
          console.log('请求来的数据', res);
          _this.loading = false
          if (res.status == 'success') {
            _this.list = res.aweme_list
          } else {
            _this.list = []
            _this.errorMsg = res.message
            _this.showError = true
          }
        })
      },
      
      changeTab({id}) {
        this.list = []
        this.tabs = this.tabs.filter(item => {
          if (id == item.id) {
            item.active = true
          } else {
            item.active = false
          }
          return item
        })
      },
    }
  })
</script>

</html>